{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Duarte\\\\react-native-navigation\\\\src\\\\Scanner.js\";\nimport React, { useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { Camera } from 'expo-camera';\nimport * as Permissions from 'expo-permissions';\nimport { db } from \"./constants/ApiKeys\";\nimport { Ionicons } from '@expo/vector-icons';\n\nvar Scanner = function (_React$Component) {\n  _inherits(Scanner, _React$Component);\n\n  function Scanner() {\n    var _this;\n\n    _classCallCheck(this, Scanner);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Scanner).call(this));\n    _this.state = {\n      hasCameraPermission: null,\n      isScanned: false,\n      flash: 'off',\n      icon: 'ios-flash-off'\n    };\n\n    _this.handleBarCodeScanned = function (_ref) {\n      var type = _ref.type,\n          data = _ref.data;\n\n      _this.setState({\n        isScanned: true\n      });\n\n      if (data !== '' && data !== null) {\n        db.ref(\"codigos/\" + data).on('value', function (snapshot) {\n          if (snapshot.exists() && snapshot.val() !== null) {\n            code = snapshot.val().codigo;\n            alert('Found', \"Bar code: \" + data + \" \\nCode: \" + code, [{\n              text: 'OK',\n              onPress: function onPress() {\n                return _this.setState({\n                  isScanned: false\n                });\n              }\n            }]);\n          } else {\n            alert('Not Found', \"Bar code: \" + data + \"\\nCode: Not Found\", [{\n              text: 'OK',\n              onPress: function onPress() {\n                return _this.setState({\n                  isScanned: false\n                });\n              }\n            }]);\n          }\n        });\n      }\n    };\n\n    _this._handleFlash = function () {\n      var _this$state = _this.state,\n          flash = _this$state.flash,\n          icon = _this$state.icon;\n\n      if (flash === 'torch') {\n        _this.setState({\n          flash: 'off'\n        });\n\n        _this.setState({\n          icon: \"ios-flash-off\"\n        });\n      } else {\n        _this.setState({\n          flash: 'torch'\n        });\n\n        _this.setState({\n          icon: \"ios-flash\"\n        });\n      }\n    };\n\n    _this.state = {\n      hasCameraPermission: null,\n      isScanned: false,\n      flash: 'off',\n      icon: 'ios-flash-off'\n    };\n    return _this;\n  }\n\n  _createClass(Scanner, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _await$Permissions$as, status;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));\n\n            case 2:\n              _await$Permissions$as = _context.sent;\n              status = _await$Permissions$as.status;\n              this.setState({\n                hasCameraPermission: status === \"granted\" ? true : false\n              });\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          hasCameraPermission = _this$state2.hasCameraPermission,\n          isScanned = _this$state2.isScanned,\n          icon = _this$state2.icon,\n          flash = _this$state2.flash;\n\n      if (hasCameraPermission === null) {\n        return React.createElement(Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          }\n        }, \"Requesting for camera permission\");\n      } else if (hasCameraPermission === false) {\n        return React.createElement(Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          }\n        }, \"No access to camera\");\n      } else if (hasCameraPermission === true) {\n        return React.createElement(View, {\n          style: {\n            flex: 1,\n            flexDirection: 'column',\n            justifyContent: 'flex-end'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          }\n        }, React.createElement(Camera, {\n          onBarCodeScanned: isScanned ? undefined : this.handleBarCodeScanned,\n          style: [StyleSheet.absoluteFillObject, styles.container],\n          flashMode: flash,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          }\n        }, React.createElement(Text, {\n          style: styles.description,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          }\n        }, \"Scan Barcode\"), React.createElement(Ionicons, {\n          name: icon,\n          color: \"white\",\n          size: 27,\n          onPress: this._handleFlash,\n          style: {\n            paddingTop: '10%',\n            textAlign: 'center',\n            backgroundColor: opacity\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          }\n        }), React.createElement(View, {\n          style: styles.layerTop,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          }\n        }), React.createElement(View, {\n          style: styles.layerCenter,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          }\n        }, React.createElement(View, {\n          style: styles.layerLeft,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          }\n        }), React.createElement(View, {\n          style: styles.focused,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          }\n        }), React.createElement(View, {\n          style: styles.layerRight,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          }\n        })), React.createElement(View, {\n          style: styles.layerBottom,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          }\n        }, React.createElement(Text, {\n          onPress: function onPress() {\n            return _this2.props.navigation.goBack();\n          },\n          style: styles.cancel,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          }\n        }, \"Cancel\"))));\n      }\n    }\n  }]);\n\n  return Scanner;\n}(React.Component);\n\nScanner.navigationOptions = {\n  headerShown: false\n};\nexport { Scanner as default };\n\nvar _Dimensions$get = Dimensions.get('window'),\n    width = _Dimensions$get.width;\n\nvar opacity = 'rgba(0, 0, 0, .5)';\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: 'column'\n  },\n  description: {\n    fontSize: width * 0.09,\n    paddingTop: '25%',\n    textAlign: 'center',\n    color: 'white',\n    backgroundColor: opacity\n  },\n  cancel: {\n    fontSize: width * 0.05,\n    textAlign: 'center',\n    color: 'white',\n    marginTop: '20%'\n  }\n});","map":{"version":3,"sources":["C:/Users/Duarte/react-native-navigation/src/Scanner.js"],"names":["React","useState","Camera","Permissions","db","Ionicons","Scanner","state","hasCameraPermission","isScanned","flash","icon","handleBarCodeScanned","type","data","setState","ref","on","snapshot","exists","val","code","codigo","alert","text","onPress","_handleFlash","askAsync","CAMERA","status","flex","flexDirection","justifyContent","undefined","StyleSheet","absoluteFillObject","styles","container","description","paddingTop","textAlign","backgroundColor","opacity","layerTop","layerCenter","layerLeft","focused","layerRight","layerBottom","props","navigation","goBack","cancel","Component","navigationOptions","headerShown","Dimensions","get","width","create","fontSize","color","marginTop"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport { Text, View, StyleSheet, Button, Alert, Dimensions } from 'react-native';\r\nimport { Camera } from 'expo-camera';\r\nimport * as Permissions from 'expo-permissions';\r\nimport { db } from './constants/ApiKeys';\r\nimport { Ionicons } from '@expo/vector-icons'; \r\n\r\nexport default class Scanner extends React.Component {\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      hasCameraPermission: null, // if app has permissions to acess camera\r\n      isScanned: false, // scanned\r\n      flash: 'off',\r\n      icon: 'ios-flash-off'\r\n    };\r\n  }\r\n  static navigationOptions = {\r\n    headerShown: false,\r\n  }\r\n  \r\n  state = {\r\n    hasCameraPermission: null, // if app has permissions to acess camera\r\n    isScanned: false, // scanned\r\n    flash: 'off',\r\n    icon: 'ios-flash-off'\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { status } = await Permissions.askAsync(Permissions.CAMERA);\r\n    this.setState({ hasCameraPermission: status === \"granted\" ? true : false });\r\n  }\r\n  \r\n  handleBarCodeScanned = ({ type, data }) => {\r\n    this.setState({isScanned: true});\r\n    if (data !== '' && data !== null) {\r\n      db.ref(`codigos/${data}`).on('value', (snapshot) => {\r\n        if (snapshot.exists() && snapshot.val() !== null) {\r\n          code = snapshot.val().codigo;\r\n          alert('Found', `Bar code: ${data} \\nCode: ${code}`,[{ text: 'OK', onPress: () => this.setState({isScanned: false}) }]);\r\n        }\r\n        else {\r\n          alert('Not Found', `Bar code: ${data}\\nCode: Not Found`,[{ text: 'OK', onPress: () => this.setState({isScanned: false}) }]);\r\n        }\r\n      });\r\n    }\r\n }\r\n\r\n  _handleFlash = () => {\r\n    const { flash, icon } = this.state;\r\n    if (flash === 'torch') {\r\n        this.setState({ flash: 'off' });\r\n        this.setState({icon: \"ios-flash-off\"});\r\n    } else {\r\n        this.setState({ flash: 'torch' });\r\n        this.setState({icon: \"ios-flash\"});\r\n    }\r\n}\r\n\r\nrender() {\r\n    const { hasCameraPermission, isScanned, icon, flash } = this.state;\r\n    if(hasCameraPermission === null){\r\n      return (\r\n        <Text>Requesting for camera permission</Text> \r\n      );\r\n    }\r\n    else if(hasCameraPermission === false){\r\n      return ( \r\n        <Text>No access to camera</Text>\r\n      )\r\n    }\r\n    else if(hasCameraPermission === true){\r\n      return(\r\n    <View\r\n      style={{\r\n        flex: 1,\r\n        flexDirection: 'column',\r\n        justifyContent: 'flex-end',\r\n      }}>\r\n        <Camera\r\n        onBarCodeScanned={ isScanned ? undefined : this.handleBarCodeScanned}\r\n        style={[StyleSheet.absoluteFillObject, styles.container]}\r\n        flashMode={flash}\r\n        >\r\n        <Text style={styles.description}>Scan Barcode</Text>\r\n        <Ionicons name={icon} color='white' size={27} onPress={this._handleFlash} style={{paddingTop: '10%',textAlign: 'center',backgroundColor: opacity}}>\r\n        </Ionicons>\r\n        <View style={styles.layerTop} />\r\n        <View style={styles.layerCenter}>\r\n          <View style={styles.layerLeft} />\r\n          <View style={styles.focused} />\r\n          <View style={styles.layerRight} />\r\n        </View>\r\n        <View style={styles.layerBottom}>\r\n        <Text\r\n          onPress={() => this.props.navigation.goBack() }\r\n          style={styles.cancel}>\r\n          Cancel\r\n        </Text>\r\n        </View>\r\n      </Camera>\r\n    </View>\r\n  );\r\n}\r\n}\r\n}\r\nconst { width } = Dimensions.get('window')\r\nconst opacity = 'rgba(0, 0, 0, .5)';\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    flexDirection: 'column',\r\n  },\r\n  description: {\r\n    fontSize: width * 0.09,\r\n    paddingTop: '25%',\r\n    textAlign: 'center',\r\n    color: 'white',\r\n    backgroundColor: opacity\r\n  },\r\n  cancel: {\r\n    fontSize: width * 0.05,\r\n    textAlign: 'center',\r\n    color: 'white',\r\n    marginTop: '20%',\r\n  }\r\n});"]},"metadata":{},"sourceType":"module"}